---
import { getTranslations } from '../i18n/translations';

// El idioma se detectará del lado del cliente
const t = getTranslations('es'); // Default a español, se actualizará con JS
---

<nav class="fixed top-0 left-0 w-full z-50 glass-effect-light dark:glass-effect-dark backdrop-blur-md shadow-sm border-b border-white/20 dark:border-white/10">
  <div class="max-w-6xl mx-auto px-6 md:px-12 py-4 flex justify-between items-center">
    <!-- Logo -->
    <a href="#inicio" class="text-gray-900 dark:text-white font-bold text-xl hover:text-light-primary dark:hover:text-primary transition">
      Jhon Chiguay 
    </a>

    <!-- Botón hamburguesa -->
    <button
      id="menu-toggle"
      class="md:hidden text-gray-900 dark:text-white p-2 rounded hover:bg-gray-200 dark:hover:bg-white/10 transition"
      aria-label="Abrir menú"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Menú desktop -->
    <ul class="hidden md:flex gap-6 text-sm font-medium text-light-secondary dark:text-secondary">
      <li><a href="#sobremi" class="hover:text-gray-900 dark:hover:text-white transition" data-i18n="nav.about">{t.nav.about}</a></li>
      <li><a href="#proyectos" class="hover:text-gray-900 dark:hover:text-white transition" data-i18n="nav.projects">{t.nav.projects}</a></li>
      <li><a href="#contacto" class="hover:text-gray-900 dark:hover:text-white transition" data-i18n="nav.contact">{t.nav.contact}</a></li>
    </ul>
  </div>

  <!-- Menú móvil -->
  <div
    id="mobile-menu"
    class="md:hidden hidden flex-col items-center gap-6 text-light-secondary dark:text-secondary text-base bg-light-surface dark:bg-background border-t border-gray-200 dark:border-white/10 px-6 py-6 opacity-0 transition-all duration-300"
  >
    <a href="#proyectos" class="hover:text-gray-900 dark:hover:text-white transition mobile-link" data-i18n="nav.projects">{t.nav.projects}</a>
    <a href="#sobremi" class="hover:text-gray-900 dark:hover:text-white transition mobile-link" data-i18n="nav.about">{t.nav.about}</a>
    <a href="#contacto" class="hover:text-gray-900 dark:hover:text-white transition mobile-link" data-i18n="nav.contact">{t.nav.contact}</a>
  </div>

  <!-- Script de animación + cierre automático -->
  <script is:inline>
    const toggle = document.getElementById('menu-toggle');
    const menu = document.getElementById('mobile-menu');
    const links = document.querySelectorAll('.mobile-link');

    toggle.addEventListener('click', () => {
      const visible = !menu.classList.contains('hidden');
      if (visible) {
        menu.classList.add('opacity-0');
        menu.classList.remove('flex');
        setTimeout(() => menu.classList.add('hidden'), 300);
      } else {
        menu.classList.remove('hidden');
        menu.classList.add('flex');
        setTimeout(() => menu.classList.remove('opacity-0'), 10);
      }
    });

    links.forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.add('opacity-0');
        menu.classList.remove('flex');
        setTimeout(() => menu.classList.add('hidden'), 300);
      });
    });
  </script>
</nav>
